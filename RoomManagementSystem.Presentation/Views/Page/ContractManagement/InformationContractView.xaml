<UserControl x:Class="RoomManagementSystem.Presentation.Views.Page.ContractManagement.InformationContractView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:RoomManagementSystem.Presentation.Views.Page.ContractManagement"
             mc:Ignorable="d"
             d:DesignHeight="627" d:DesignWidth="877"
             FontFamily="Roboto"
             Background="White">

    <!-- ========== RESOURCE STYLES ========== -->
    <UserControl.Resources>
        <Style x:Key="HeaderTextStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="Black"/>
        </Style>

        <Style x:Key="SectionHeaderStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Foreground" Value="#667085"/>
        </Style>

        <Style x:Key="SectionContentStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="#333843"/>
        </Style>

        <Style x:Key="DataGridHeaderStyle" TargetType="DataGridColumnHeader">
            <Setter Property="Background" Value="#FAFAFA"/>
            <Setter Property="Foreground" Value="#667085"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="BorderThickness" Value="0,1,0,1"/>
            <Setter Property="BorderBrush" Value="#F0F1F3"/>
            <Setter Property="Padding" Value="0,10"/>
        </Style>

        <Style x:Key="DataGridCellStyle" TargetType="DataGridCell">
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="16,10"/>
            <Setter Property="Foreground" Value="#333843"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
        </Style>
    </UserControl.Resources>


    <!-- ========== MAIN GRID ========== -->
    <Grid Margin="37">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="20"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="30"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- ========== THÔNG TIN CHI TIẾT ========== -->
        <Grid Grid.Row="0" Grid.RowSpan="3" DataContext="{Binding DetailedContractInfo}">
            <TextBlock Text="THÔNG TIN CHI TIẾT HỢP ĐỒNG"
                       Style="{StaticResource HeaderTextStyle}"
                       VerticalAlignment="Top"/>

            <Grid Margin="0,30,0,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="200"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Cột trái -->
                <Border Grid.Column="0" Background="#FAFAFA" CornerRadius="8" Padding="20">
                    <StackPanel>
                        <TextBlock Text="Ngày lập hợp đồng" Style="{StaticResource SectionHeaderStyle}" Margin="0,0,0,5"/>
                        <TextBlock Text="{Binding NgayLapHopDong, StringFormat='dd/MM/yyyy'}"
                                   Style="{StaticResource SectionContentStyle}" Margin="0,0,0,15"/>

                        <TextBlock Text="Ngày bắt đầu" Style="{StaticResource SectionHeaderStyle}" Margin="0,0,0,5"/>
                        <TextBlock Text="{Binding NgayBatDau, StringFormat='dd/MM/yyyy'}"
                                   Style="{StaticResource SectionContentStyle}" Margin="0,0,0,15"/>

                        <TextBlock Text="Thời hạn" Style="{StaticResource SectionHeaderStyle}" Margin="0,0,0,5"/>
                        <TextBlock Text="{Binding ThoiHan}" Style="{StaticResource SectionContentStyle}" Margin="0,0,0,15"/>

                        <TextBlock Text="Ngày kết thúc" Style="{StaticResource SectionHeaderStyle}" Margin="0,0,0,5"/>
                        <TextBlock Text="{Binding NgayKetThuc, StringFormat='dd/MM/yyyy'}"
                                   Style="{StaticResource SectionContentStyle}"/>
                    </StackPanel>
                </Border>

                <!-- Cột phải -->
                <StackPanel Grid.Column="1" Margin="28,10,0,0">
                    <TextBlock Text="Thông tin người thuê"
                               Style="{StaticResource SectionHeaderStyle}" Margin="0,0,0,10"/>
                    <TextBlock Text="{Binding TenNguoiThue}"
                               Style="{StaticResource SectionContentStyle}" Margin="0,0,0,10"/>

                    <TextBlock Text="Địa chỉ thuê"
                               Style="{StaticResource SectionHeaderStyle}" Margin="0,0,0,5"/>
                    <TextBlock Text="{Binding DiaChiThue}"
                               Style="{StaticResource SectionContentStyle}" Margin="0,0,0,10"/>

                    <TextBlock Text="Thông tin liên hệ"
                               Style="{StaticResource SectionHeaderStyle}" Margin="0,0,0,5"/>
                    <TextBlock Text="{Binding ThongTinLienHe}"
                               Style="{StaticResource SectionContentStyle}" Margin="0,0,0,15"/>

                    <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                        <TextBlock Text="Mã hợp đồng: " Style="{StaticResource SectionHeaderStyle}" FontWeight="SemiBold"/>
                        <TextBlock Text="{Binding MaHopDong, TargetNullValue='--'}" Style="{StaticResource SectionContentStyle}"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="0,0,0,15">
                        <TextBlock Text="Tiền cọc: " Style="{StaticResource SectionHeaderStyle}" FontWeight="SemiBold"/>
                        <TextBlock Text="{Binding TienCoc, TargetNullValue='0 VND'}"
                                   Style="{StaticResource SectionContentStyle}" FontWeight="SemiBold"/>
                    </StackPanel>

                    <TextBlock Text="Ghi chú" Style="{StaticResource SectionHeaderStyle}" Margin="0,0,0,5"/>
                    <TextBlock Style="{StaticResource SectionContentStyle}"
                               TextWrapping="Wrap"
                               Text="{Binding GhiChu, TargetNullValue='Không có ghi chú.'}"/>
                </StackPanel>
            </Grid>
        </Grid>

        <!-- ========== LỊCH SỬ CHỈNH SỬA ========== -->
        <TextBlock Grid.Row="4" Text="LỊCH SỬ CHỈNH SỬA HỢP ĐỒNG"
                   Style="{StaticResource HeaderTextStyle}" Margin="0,0,0,20"/>

        <DataGrid Grid.Row="5"
                  ItemsSource="{Binding ContractHistory}"
                  AutoGenerateColumns="False" IsReadOnly="True"
                  Background="White" BorderThickness="0"
                  HeadersVisibility="Column" GridLinesVisibility="Horizontal"
                  HorizontalGridLinesBrush="#F0F1F3"
                  RowHeaderWidth="0">
            <DataGrid.Resources>
                <Style TargetType="DataGridRow">
                    <Setter Property="BorderThickness" Value="0"/>
                    <Setter Property="MinHeight" Value="40"/>
                    <Setter Property="FontSize" Value="12"/>
                    <Setter Property="VerticalContentAlignment" Value="Center"/>
                </Style>
            </DataGrid.Resources>

            <DataGrid.ColumnHeaderStyle>
                <Style TargetType="DataGridColumnHeader" BasedOn="{StaticResource DataGridHeaderStyle}">
                    <Setter Property="HorizontalContentAlignment" Value="Left"/>
                    <Setter Property="Padding" Value="16,12"/>
                </Style>
            </DataGrid.ColumnHeaderStyle>

            <!-- Cột dữ liệu -->
            <DataGrid.Columns>
                <DataGridTextColumn Header="STT" Binding="{Binding Stt}" Width="60" CellStyle="{StaticResource DataGridCellStyle}"/>
                <DataGridTextColumn Header="NGÀY SỬA" Binding="{Binding NgaySua, StringFormat='dd/MM/yyyy HH:mm'}" Width="150" CellStyle="{StaticResource DataGridCellStyle}"/>
                <DataGridTextColumn Header="NGƯỜI THỰC HIỆN" Binding="{Binding NguoiThucHien}" Width="150" CellStyle="{StaticResource DataGridCellStyle}"/>
                <DataGridTextColumn Header="HÀNH ĐỘNG" Binding="{Binding HanhDong}" Width="150" CellStyle="{StaticResource DataGridCellStyle}"/>
                <DataGridTextColumn Header="NỘI DUNG THAY ĐỔI" Binding="{Binding NoiDung}" Width="*" CellStyle="{StaticResource DataGridCellStyle}"/>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</UserControl>
