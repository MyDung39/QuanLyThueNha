<UserControl x:Class="RoomManagementSystem.Presentation.Views.Page.ContractManagement.ViewContractView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="800"
             Background="Transparent">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="15"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Viewer cho file Word -->
        <Border Grid.Row="0" Background="White" Padding="1" CornerRadius="5">
            <!-- ✅ BINDING: Hiển thị nội dung từ thuộc tính ContractDocument trong ViewModel -->
            <!-- Loại bỏ x:Name="docViewer" -->
            <FlowDocumentScrollViewer Document="{Binding ContractDocument}"
                                      VerticalScrollBarVisibility="Auto" 
                                      HorizontalScrollBarVisibility="Disabled"
                                      Background="White"
                                      BorderBrush="#CCCCCC"
                                      BorderThickness="1"/>
        </Border>

        <!-- Footer với tên hợp đồng và các nút -->
        <Border Grid.Row="2" Background="White" CornerRadius="15" Height="60">
            <Grid Margin="30,0">
                <!-- ✅ BINDING: Hiển thị tên của hợp đồng đang được chọn -->
                <!-- Loại bỏ x:Name="contractNameText" và Text="..." -->
                <TextBlock Text="{Binding SelectedContract.ContractName}" 
                           Foreground="#797979" 
                           FontSize="18" 
                           FontWeight="SemiBold" 
                           VerticalAlignment="Center"/>

                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <!-- Nút Tải xuống đã được binding đúng -->
                    <Button Command="{Binding DownloadContractCommand}"
                            Background="Transparent" BorderThickness="0" Cursor="Hand">
                        <StackPanel Orientation="Horizontal">
                            <Image Source="../../../Resources/Images/download_icon.png" Width="20" Height="20"/>
                            <TextBlock Text="Tải xuống" 
                                       Foreground="#969696" 
                                       FontSize="12" 
                                       FontWeight="SemiBold" 
                                       VerticalAlignment="Center" 
                                       Margin="8,0,0,0"/>
                        </StackPanel>
                    </Button>

                    <!-- Nút Gửi đã được binding đúng -->
                    <Button Command="{Binding SendContractCommand}"
                            Background="#FFB27D" 
                            Width="84" Height="32" BorderThickness="0" Cursor="Hand" Margin="30,0,0,0">
                        <Button.Resources>
                            <Style TargetType="Border">
                                <Setter Property="CornerRadius" Value="15"/>
                            </Style>
                        </Button.Resources>
                        <StackPanel Orientation="Horizontal">
                            <Image Source="../../../Resources/Images/send_icon.png" Width="16" Height="16"/>
                            <TextBlock Text="Gửi" 
                                       Foreground="White" 
                                       FontSize="12" 
                                       FontWeight="SemiBold" 
                                       VerticalAlignment="Center" 
                                       Margin="8,0,0,0"/>
                        </StackPanel>
                    </Button>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</UserControl>