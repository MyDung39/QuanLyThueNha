<UserControl x:Class="RoomManagementSystem.Presentation.Views.Page.ServiceManagement.ServiceManagementView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:local="clr-namespace:RoomManagementSystem.Presentation.Views.Page.ServiceManagement"
             mc:Ignorable="d"
             d:DesignHeight="794" d:DesignWidth="1302"
             FontFamily="Roboto"
             Background="White"
             x:Name="RootControl">

    <UserControl.Resources>
        <local:SelectedRoomToFontWeightConverter x:Key="SelectedRoomToFontWeightConverter"/>
        <Style x:Key="HeaderTabRadioButtonStyle" TargetType="RadioButton">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#586A84"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="RadioButton">
                        <Grid Background="{TemplateBinding Background}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            <Border x:Name="BottomBar" Height="2" Background="#FFB27D" VerticalAlignment="Bottom" Visibility="Collapsed"/>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter Property="Foreground" Value="#FFB27D"/>
                                <Setter TargetName="BottomBar" Property="Visibility" Value="Visible"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>

    <Grid Margin="18,17,18,16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="16"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="320"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <Border Grid.RowSpan="4" Grid.Column="0" Background="Transparent">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="124*"/>
                    <ColumnDefinition Width="64*"/>
                    <ColumnDefinition Width="73*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="52"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <Border Grid.Row="0" Background="#F0EDFF" Opacity="0.3" Grid.ColumnSpan="3"/>
                <TextBlock
                           Margin="22,0,0,0"
                           VerticalAlignment="Center"
                           Foreground="#1F384C"
                           FontSize="16"
                           FontWeight="Medium"
                           Text="Danh sách phòng" Grid.ColumnSpan="3"/>

                <!-- Danh sách nhóm Nhà - Phòng theo dữ liệu, giữ style cũ -->
                <ScrollViewer Grid.Row="1" Grid.ColumnSpan="3" HorizontalAlignment="Stretch">
                    <ItemsControl ItemsSource="{Binding DanhSachNhaPhong}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Margin="12,16,12,0">
                                    <TextBlock Text="{Binding House.DiaChi}"
                                               Foreground="#292D32"
                                               FontSize="16"
                                               FontWeight="Medium"
                                               Margin="8,0,0,8"/>
                                    <Border Background="#F0EDFF" Opacity="0.5" CornerRadius="10" Padding="20">
                                        <ItemsControl ItemsSource="{Binding Rooms}">
                                            <ItemsControl.ItemTemplate>
                                                <DataTemplate>
                                                    <Button Command="{Binding DataContext.SelectRoomCommand, ElementName=RootControl}"
                                                            CommandParameter="{Binding .}"
                                                            Background="Transparent" BorderThickness="0" Padding="0" Cursor="Hand">
                                                        <TextBlock Text="{Binding MaPhong}" Foreground="#292D32" FontSize="14" Margin="8,6,0,16">
                                                            <TextBlock.FontWeight>
                                                                <MultiBinding Converter="{StaticResource SelectedRoomToFontWeightConverter}">
                                                                    <Binding Path="MaPhong"/>
                                                                    <Binding ElementName="RootControl" Path="DataContext.SelectedPhong.MaPhong"/>
                                                                </MultiBinding>
                                                            </TextBlock.FontWeight>
                                                        </TextBlock>
                                                    </Button>
                                                </DataTemplate>
                                            </ItemsControl.ItemTemplate>
                                        </ItemsControl>
                                    </Border>
                                </StackPanel>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>
            </Grid>
        </Border>

        <Border Grid.Column="1" Grid.Row="2" Background="White" CornerRadius="10" Height="62">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <RadioButton Grid.Column="0"
                             x:Name="electricTab"
                             Style="{StaticResource HeaderTabRadioButtonStyle}"
                             Content="Điện"
                             IsChecked="True"
                             Checked="ElectricTab_Checked"/>
                <RadioButton Grid.Column="1"
                             x:Name="waterTab"
                             Style="{StaticResource HeaderTabRadioButtonStyle}"
                             Content="Nước"
                             Checked="WaterTab_Checked"/>
                <RadioButton Grid.Column="2"
                             x:Name="otherTab"
                             Style="{StaticResource HeaderTabRadioButtonStyle}"
                             Content="Khác"
                             Checked="OtherTab_Checked"/>
            </Grid>
        </Border>

        <TextBlock Grid.Column="1" Grid.Row="0"
                   Text="Dịch vụ"
                   Foreground="#1F384C"
                   FontSize="20"
                   FontWeight="Medium"
                   VerticalAlignment="Center"
                   Margin="4,0,0,0"/>

        <ContentControl x:Name="tabContentControl" Grid.Column="1" Grid.Row="3"/>
    </Grid>
</UserControl>
